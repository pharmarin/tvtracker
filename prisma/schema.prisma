// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Genre {
    id   Int     @id
    name String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    shows Show[]
}

model Season {
    id           Int       @id
    name         String?
    episodeCount Int?
    number       Int?
    poster       String?
    episodes     Episode[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    show   Show? @relation(fields: [showId], references: [id], onDelete: Cascade)
    showId Int?
}

model Episode {
    id       Int       @id
    number   Int?
    name     String?
    overview String?
    airDate  DateTime?

    checked Boolean @default(false)

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    season   Season? @relation(fields: [seasonId], references: [id], onDelete: Cascade)
    seasonId Int?
}

model Show {
    id               Int      @id
    name             String?
    genres           Genre[]
    episodeCount     Int?
    seasonCount      Int?
    originalCountry  String?
    originalLanguage String?
    originalName     String?
    seasons          Season[]
    status           String?
    poster           String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
